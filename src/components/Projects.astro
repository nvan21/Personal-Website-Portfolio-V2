---
import { getCollection } from "astro:content";
import ProjectCard from "../components/ProjectCard.astro";
import BackdropText from "./BackdropText.astro";

// Fetch all projects and sort them by date (newest first)
const allProjects = await getCollection("projects");
const sortedProjects = allProjects.sort(
  (a, b) => b.data.publishDate.valueOf() - a.data.publishDate.valueOf(),
);
---

<div id="projects">
  <BackdropText backdropText="Projects" text="Projects" />

  <!-- Responsive Project Grid -->
  <div class="mb-12 grid grid-cols-1 gap-8 md:grid-cols-2">
    {sortedProjects.map((project) => <ProjectCard {project} />)}
  </div>
</div>
